<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selamat Datang - SERABI</title>
    
    <link rel="modulepreload" href="js/supabase.js">
    <link rel="modulepreload" href="js/main.js">

    <style>
        /* Reset Dasar */
        body {
            margin: 0; padding: 0;
            background: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            overflow: hidden; /* Mencegah scroll saat animasi air */
        }

        /* TEKS LOADING */
        .loading-text {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 32px; font-weight: 800;
            color: #0A3D52;
            text-transform: uppercase;
            letter-spacing: 5px;
            z-index: 0;
            pointer-events: none;
            /* CLS Fix: Pastikan ukuran tetap */
            width: 100%; text-align: center; line-height: 1.2;
            
            /* Animasi fade out */
            animation: fadeOutText 1s ease-out 2.5s forwards;
            font-display: swap;
        }

        /* AIR NAIK (CLS CULPRIT FIX) */
        .water {
            position: fixed; bottom: 0; left: 0; width: 100%; 
            height: 0%; /* Start at 0 */
            z-index: 10;
            background-color: #93DCEC; 
            opacity: 0.95;
            pointer-events: none;
            
            /* OPTIMASI GPU: Mencegah Layout Shift Score */
            will-change: height; 
            transform: translateZ(0); 

            animation: fillWater 4s ease-in-out forwards;
        }

        /* Gelombang */
        .wave {
            position: absolute; top: -198px; left: 0; width: 200%; height: 200px;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1440' height='200'%3E%3Cpath fill='%2393DCEC' d='M0 80 Q 360 0 720 80 T 1440 80 V200 H0 Z'/%3E%3C/svg%3E");
            background-size: 50% 100%;
            will-change: transform; /* Optimasi GPU */
        }
        
        .wave1 { z-index: 3; opacity: 1; animation: waveMove 5s linear infinite; }
        .wave2 { z-index: 2; opacity: 0.5; animation: waveMove 7s linear infinite; animation-delay: -2s; }
        .wave3 { z-index: 1; opacity: 0.3; animation: waveMove 11s linear infinite; animation-delay: -5s; }
        
        @keyframes fadeOutText { to { opacity: 0; visibility: hidden; } }
        @keyframes fillWater { 0% { height: 0%; } 100% { height: 100%; } }
        @keyframes waveMove { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
    </style>

    <link rel="stylesheet" href="css/portal.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'">
    
    <noscript>
        <link rel="stylesheet" href="css/portal.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    </noscript>
</head>
<body>

    <div class="loading-text" id="loadingText">MEMUAT DATA...</div>

    <div class="water">
        <div class="wave wave1"></div>
        <div class="wave wave2"></div>
        <div class="wave wave3"></div>
    </div>

    <div class="portal-container" id="portalLayer">
        <header class="portal-header">
            <h1>SERABI</h1>
            <p>Sistem Estimasi Debit Air Sungai Berbasis Radar</p>
        </header>

        <div class="role-grid">
            <a href="home_public.html" class="role-card">
                <div class="icon-box" style="width: 50px; height: 50px; margin: 0 auto 20px auto; display:flex; justify-content:center; align-items:center;">
                    <i class="fas fa-users"></i>
                </div>
                <h3>Masyarakat Umum</h3>
                <p>Status keamanan sungai & peringatan banjir.</p>
            </a>

            <a href="home.html" class="role-card">
                <div class="icon-box" style="width: 50px; height: 50px; margin: 0 auto 20px auto; display:flex; justify-content:center; align-items:center;">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h3>Mahasiswa</h3>
                <p>Data mentah, grafik FFT & simulasi radar.</p>
            </a>

            <a href="login.html" class="role-card">
                <div class="icon-box" style="width: 50px; height: 50px; margin: 0 auto 20px auto; display:flex; justify-content:center; align-items:center;">
                    <i class="fas fa-user-shield"></i>
                </div>
                <h3>Petugas</h3>
                <p>Manajemen data & log insiden.</p>
            </a>
        </div>

        <footer class="portal-footer">
            Â© 2025 Capstone Design - Telkom University
        </footer>
    </div>

    <script src="js/background.js" defer></script>
    <script type="module" src="js/main.js" defer></script>
</body>
</html>