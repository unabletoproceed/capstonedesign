/* css/public.css */

/* --- LAYOUT UMUM --- */
.public-container {
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
    text-align: center;
}

.status-header h1 {
    font-size: 2.5rem;
    margin: 10px 0;
    color: var(--deep-ocean);
    text-transform: uppercase;
}

.badge-pill {
    display: inline-block;
    padding: 6px 15px;
    border-radius: 20px;
    color: white;
    font-weight: bold;
    font-size: 0.9rem;
    transition: background 0.3s;
}

/* --- SCENE BOX --- */
.scene-box {
    width: 100%;
    height: 350px;
    background: linear-gradient(to bottom, #E1F5FE, #B3E5FC); 
    border-radius: 20px;
    position: relative; 
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    margin: 30px 0;
    transition: background 1s ease;
    z-index: 1;
}

/* --- IKON STATUS (UPDATED FOR SVG) --- */
.status-icon-container {
    position: absolute;
    top: 50%; left: 50%; transform: translate(-50%, -50%);
    z-index: 50; 
    text-align: center;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.9));
    pointer-events: none;
}

/* KITA UBAH SELECTOR AGAR MENARGETKAN SVG JUGA */
.status-icon-container i,
.status-icon-container svg {
    font-size: 8rem;       /* Ukuran Besar */
    width: 8rem;           /* Pastikan lebar ngikut */
    height: 8rem;          /* Pastikan tinggi ngikut */
    display: block;
    transition: color 0.5s ease, fill 0.5s ease;
    transform: scale(1);
    fill: currentColor;    /* Agar warna mengikuti properti 'color' */
}

/* --- WADAH AIR UTAMA (SOLID BODY) --- */
.public-water-container {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 20%; 
    
    /* PENTING: Matikan background image di sini */
    background-image: none !important; 
    background-color: #29B6F6; 
    
    z-index: 10; 
    transition: height 1s cubic-bezier(0.4, 0, 0.2, 1), background-color 1s ease;
}

/* --- GELOMBANG (TOP LAYER ONLY) --- */
.public-wave {
    position: absolute;
    top: -49px; 
    left: 0;
    width: 200%;
    height: 50px;
    
    background-repeat: repeat-x; 
    background-position: bottom;
    background-size: 50% 100%;
    
    /* Default: Warna Air Aman (#29B6F6) */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320' preserveAspectRatio='none'%3E%3Cpath fill='%2329B6F6' fill-opacity='1' d='M0,160L48,170.7C96,181,192,203,288,197.3C384,192,480,160,576,144C672,128,768,128,864,149.3C960,171,1056,213,1152,213.3C1248,213,1344,171,1392,149.3L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
    
    transition: background-image 0.5s ease;
}

.p-wave1 { z-index: 3; opacity: 1; margin-top: 0px; animation: waveMove 6s linear infinite; }
.p-wave2, .p-wave3 { display: none !important; }

@keyframes waveMove {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
}

/* =========================================
   LOGIKA STATE (AMAN / SIAGA / BAHAYA)
   ========================================= */

/* --- 1. STATE: AMAN --- */
.scene-box.level-aman { background: linear-gradient(to bottom, #E1F5FE, #B3E5FC); }

/* Update Selector SVG */
.scene-box.level-aman .status-icon-container svg { 
    color: #2dce89; /* Hijau */
    opacity: 0.8; 
    transform: scale(1); 
}

.scene-box.level-aman .public-water-container {
    height: 25%; 
    background-color: #29B6F6; 
}
.scene-box.level-aman .public-wave {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320' preserveAspectRatio='none'%3E%3Cpath fill='%2329B6F6' fill-opacity='1' d='M0,160L48,170.7C96,181,192,203,288,197.3C384,192,480,160,576,144C672,128,768,128,864,149.3C960,171,1056,213,1152,213.3C1248,213,1344,171,1392,149.3L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
}
.scene-box.level-aman .p-wave1 { animation-duration: 8s; }


/* --- 2. STATE: SIAGA --- */
.scene-box.level-siaga { background: linear-gradient(to bottom, #E3F2FD, #90CAF9); }

/* Update Selector SVG */
.scene-box.level-siaga .status-icon-container svg { 
    color: #FBC02D; /* Kuning */
    opacity: 1; 
    transform: scale(1.2);
    animation: pulseSlow 3s infinite;
}

.scene-box.level-siaga .public-water-container {
    background-color: #0288D1; 
    animation: tideBob 4s ease-in-out infinite;
}
.scene-box.level-siaga .public-wave {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320' preserveAspectRatio='none'%3E%3Cpath fill='%230288D1' fill-opacity='1' d='M0,160L48,170.7C96,181,192,203,288,197.3C384,192,480,160,576,144C672,128,768,128,864,149.3C960,171,1056,213,1152,213.3C1248,213,1344,171,1392,149.3L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
}
.scene-box.level-siaga .p-wave1 { animation-duration: 4s; }


/* --- 3. STATE: BAHAYA --- */
.scene-box.level-bahaya { background: linear-gradient(to bottom, #37474F, #263238); }

/* Update Selector SVG */
.scene-box.level-bahaya .status-icon-container svg { 
    color: #FF5252; /* Merah */
    opacity: 1; 
    animation: alarmPulse 2s infinite; 
}

.scene-box.level-bahaya .public-water-container {
    height: 85%; 
    background-color: #01579B; 
}
.scene-box.level-bahaya .public-wave {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320' preserveAspectRatio='none'%3E%3Cpath fill='%2301579B' fill-opacity='1' d='M0,160L48,170.7C96,181,192,203,288,197.3C384,192,480,160,576,144C672,128,768,128,864,149.3C960,171,1056,213,1152,213.3C1248,213,1344,171,1392,149.3L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
}
.scene-box.level-bahaya .p-wave1 { animation-duration: 1.5s; }


/* ANIMASI & LAINNYA */
@keyframes tideBob { 0% { height: 45%; } 50% { height: 50%; } 100% { height: 45%; } }
@keyframes pulseSlow { 0% { transform: scale(1.2); opacity: 0.9; } 50% { transform: scale(1.3); opacity: 1; } 100% { transform: scale(1.2); opacity: 0.9; } }
@keyframes alarmPulse { 
    0% { transform: scale(1.4); filter: drop-shadow(0 0 0 rgba(255, 82, 82, 0.4)); } 
    50% { transform: scale(1.5); filter: drop-shadow(0 0 20px rgba(255, 82, 82, 0.8)); } 
    100% { transform: scale(1.4); filter: drop-shadow(0 0 0 rgba(255, 82, 82, 0.4)); } 
}

/* HAPUS RAIN EFFECT TOTAL AGAR BERSIH */
.rain { display: none !important; }

/* KARTU DATA */
.advice-card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); border-top: 5px solid #ccc; position: relative; z-index: 60; }
.advice-card.safe { border-color: #2dce89; }
.advice-card.danger { border-color: #f5365c; }
.data-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 20px; text-align: center; }
.data-item { display: flex; flex-direction: column; }
.label { font-size: 0.8rem; color: #777; margin-bottom: 5px; }
.value { font-size: 1.5rem; font-weight: bold; color: var(--deep-ocean); }
.value-small { font-size: 1rem; font-weight: bold; color: var(--deep-ocean); padding-top: 5px; }
.unit { font-size: 0.8rem; color: #999; }
.wa-float { display: block; width: 100%; background: #25D366; color: white; text-align: center; padding: 12px; border-radius: 50px; font-weight: bold; text-decoration: none; margin-top: 20px; box-shadow: 0 4px 10px rgba(37, 211, 102, 0.3); transition: transform 0.2s; }
.wa-float:hover { transform: translateY(-2px); }